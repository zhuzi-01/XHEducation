<!DOCTYPE html>
<!-- saved from url=(0055)http://www.qifengedu.com/index.php/Home/User/login.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>登录-学海教育</title>
    <link rel="stylesheet" type="text/css" href="../css/tpshop.css">
    <link rel="stylesheet" type="text/css" href="../css/myaccount.css">
    <script src="../js/jquery-1.11.3.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/layer.js" type="text/javascript"></script><link rel="stylesheet" href="../css/layer.css" id="layuicss-skinlayercss">
    <link href="../css/user.css" type="text/css" rel="stylesheet" />
</head>
<body>
<div class="loginsum_cm">
    <div class="w1224 p">
        <div class="login-dl">
            <a href="index.html" title="首页">
                <img src="../pics/footer_logo2.png">
            </a>
        </div>
        <div class="login-welcome">
            <span>欢迎登录</span>
        </div>
    </div>
</div>
<div class="loginsum_main" style="background: #e9e1d6;">
    <div class="w1224 p">
        <div class="advertisement">
        	<img src="../pics/login_pic.jpg" title="" style="">
        </div>
        <div class="login_form">
            <div class="lo_intext">
                <div class="layel1">
                    <span>账户登录</span>
                </div>
                <form id="loginform" method="post">
                    <div class="layel2">
                        <div class="text_uspa text_uspa_focus">
                            <label class="judgp uspa_user"></label>
                            <input type="text" autofocus="" class="text_cmu" value="" placeholder="手机号/邮箱" name="username" id="username" autocomplete="off">
                        </div>
                        <div class="text_uspa">
                            <label class="judgp uspa_pwd"></label>
                            <input type="password" class="text_cmu" value="" placeholder="密码" name="password" id="password" autocomplete="off">
                        </div>
                        <script type="text/javascript" src="../js/login.js"></script>
                        <div class="form-inline-font" style="width: 90px;margin-left: 295px;margin-top: 10px; font-size: 12px">

                        </div>
                        <div class="form-inline-input" style="width: 409px; padding-left: 21px;">
                            <div class="code-box" id="code-box"style="width: 305px;">
                                <input type="text" name="code" class="code-input" />
                                <p id="pp">滑动来验证</p>
                                <span style="background: deepskyblue">>>></span>
                            </div>
                        </div>

                        <div class="sum_reme_for p">
							<!--<div class="autplog">
                                <label>
                                    <input type="hidden" name="referurl" id="referurl" value="http://www.qifengedu.com/index.php/Home/Cart/cart2.html">
                                    <input type="checkbox" class="u-ckb J-auto-rmb"  name="autologin" value="1">自动登录
                                </label>
                            </div>-->
                            <div class="foget_pwt">
                                <a href="http://www.qifengedu.com/index.php/Home/User/forget_pwd.html">忘记密码？</a>
                            </div>
                        </div>
                        <div class="login_bnt">
                            <a href="javascript:void(0);" onclick="checkSubmit();" class="J-login-submit" name="sbtbutton">登&nbsp;&nbsp;&nbsp;&nbsp;录</a>
                        </div>
                    </div>
                </form>
                <div class="layel3">
                    <div class="contactsty">
                        <div class="tecant_c">
                            <ul>
                                                                        <li class="spacer"></li>
                                        <li>
                                            <a class="justclix" href="http://www.qifengedu.com//index.php/Home/LoginApi/login/oauth/weixin.html" title="weixin">
                                                <i class="judgp co_wechat"></i>
                                                <span>微信</span>
                                            </a>
                                        </li>
                                                                        <!---->
                                                                        <li class="spacer"></li>
                                        <li>
                                            <a class="justclix" href="http://www.qifengedu.com/index.php/home/LoginApi/login/oauth/qq.html" title="QQ">
                                                <i class="judgp co_qq"></i>
                                                <span>QQ</span>
                                            </a>
                                        </li>
                                                                        <!---->
                                                            </ul>
                        </div>
                        <div class="register_c">
                            <a class="justclix" href="reg.html">
                                <i class="judgp co_register"></i>
                                <span>立即注册</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--footer-s-->
<!--<div class="footer p">-->
    <!--<//include file="public/footer_index" />-->
<!--</div>-->
<iframe src="footer.html" frameborder="0" height="319px" width="100%" scrolling="no" ></iframe>
<!--web footer end-->
<!--footer-e-->
<script>
window.addEventListener('load',function(){

//code是后台传入的验证字符串
var code = "jsaidaisd656",
codeFn = new moveCode(code);

//获取当前的code值
//console.log(codeFn.getCode());

//改变code值
//code = '46asd546as5';
//codeFn.setCode(code);

//重置为初始状态
//codeFn.resetCode();
});
</script>
<script src="../js/jqAlert.min.js"></script>
<script type="text/javascript">
    $(function(){
        $('.text_cmu').focus(function(){
            //焦点获取
            $(this).parents('.text_uspa').addClass('text_uspa_focus');
        })
        $('.text_cmu').blur(function(){
            //失去焦点
            $(this).parents('.text_uspa').removeClass('text_uspa_focus');
        })
    })

    function checkSubmit()
    {
        var username = $.trim($('#username').val());
        var password = $.trim($('#password').val());
        var slide=$("#pp").css("width");
        //alert(slide);
        var referurl = $('#referurl').val();
        var verify_code = $.trim($('#verify_code').val());
        if(username == ''){
            showErrorMsg('用户名不能为空!');
            return false;
        }
        if(slide != '306px'){
            showErrorMsg('请滑动滑块来验证!');
            return false;
        }
        if(password == ''){
            showErrorMsg('密码不能为空!');
            return false;
        }
        if(!checkMobile(username) && !checkEmail(username)){
            showErrorMsg('账号格式不匹配!');
            return false;
        }

        $.ajax({
            type : 'post',
            url : '/login',
            data : {"username":username,"password":password},
            dataType : 'json',
            success : function(res){
                var res=eval(res);
                if(res.result == 'success'){
                    jqAlert.Confirm('登录成功');
                    if (document.referrer.indexOf("gooddetail.html")!=-1){
                        setInterval('window.history.go(-1)',1000);
                    }
                    setInterval('window.location.href="index.html"',1000);
                }else{
                    jqAlert.Confirm('登录失败请重试');
                }
            }

        });

    }

    function checkMobile(tel) {
        var reg = /(^1[3|4|5|7|8][0-9]{9}$)/;
        if (reg.test(tel)) {
            return true;
        }else{
            return false;
        };
    }

    function checkEmail(str){
        var reg = /^([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
        if(reg.test(str)){
            return true;
        }else{
            return false;
        }
    }

    function showErrorMsg(msg){
        layer.alert(msg, {icon: 2});
//        $('.msg-err').show();
//        $('.J-errorMsg').html(msg);
    }

    function verify(){
        $('#verify_code_img').attr('src','/index.php?m=Home&c=User&a=verify&r='+Math.random());
    }
</script>

</body></html>