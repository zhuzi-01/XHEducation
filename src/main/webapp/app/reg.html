<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>注册-学海教育</title>
    <link href="../css/reg3.css" rel="stylesheet">

    <script charset="utf-8" src="../js/b.js"></script>
    <script charset="utf-8" src="../js/lxb.js"></script>
    <script charset="utf-8" src="../js/v.js"></script>
    <script type="text/javascript" src="../js/jquery-1.10.2.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/tpshop.css">
    <script src="../js/layer.js"></script>
    <link rel="stylesheet" href="../css/layer.css" id="layui_layer_skinlayercss" style="">
    <!--弹窗js 参考文档 http://layer.layui.com/-->
    <script src="../js/global.js"></script>
    <link rel="stylesheet" href="../css/float.css" type="text/css" charset="utf-8">
    <script type="text/javascript" charset="UTF-8" src="../js/bsl.js"></script>
    <script type="text/javascript" id="BridgeRCVEnter" charset="UTF-8" src="../js/Enter.php"></script>
    <script type="text/javascript" charset="UTF-8" src="../js/main_icon_invite_mess_api.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/main.css">
    <link rel="stylesheet" type="text/css" href="../css/fix.css">
    <link type="text/css" rel="stylesheet" href="../css/m-webim-lite.css">
    <script data-require-id="front/webimlite/main" src="../js/main.js" async=""></script>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/style.css">
    <link href="../css/user.css" type="text/css" rel="stylesheet" />

</head>
<body style="">


<ins id="qiao-wrap">

    </ins>
<div class="regcon">
    <a class="m-fnlogoa fn-fl" href="reg.html"><img
            src="../pics/footer_logo2.png"></a><span class="m-fntit">欢迎注册</span>
    <div class="ui_tab">
        <ul class="ui_tab_nav regnav">
            <!-- <li class="uli active "><a href="/index.php/Home/User/reg.html" >手机注册</a></li> -->

            <li class="no fn-fr loginbtn">我已注册，马上<a href="login.html">登录&gt;</a>
            </li>
        </ul>

        <form id="reg_form2" method="post" action="" >
            <input type="hidden" name="scene" value="1">
            <div class="ui_tab_content">
                <div class="m-fnbox ui_panel" style="display: block;">
                    <div class="fnlogin clearfix">

                        <div class="line">
                            <label class="linel"><span class="dt">手机号码：</span></label>
                            <div class="liner">
                                <input type="text" class="inp fmobile J_cellphone" placeholder="请输入手机号码" name="username"
                                       onkeyup="this.value=this.value.replace(/[^\d]/g,'')" id="username"
                                       required="">
                            </div>
                            <span class="mobile_hint" style="font-size: 30px;"></span>
                        </div>

                        <div class="line">
                            <label class="linel"><span class="dt">设置密码：</span></label>
                            <div class="liner">
                                <input type="password" class="inp fpass J_password" placeholder="6-16位大小写英文字母、数字或符号的组合"
                                       autocomplete="off" maxlength="16" id="password" name="password" value=""
                                       required="">
                            </div>
                            <span class="password_hint"  style="font-size: 30px;"></span>
                        </div>
                        <div class="line">
                            <label class="linel"><span class="dt">确认密码：</span></label>
                            <div class="liner">
                                <input type="password" class="inp fsecpass J_password2" placeholder="请再次输入密码"
                                       autocomplete="off" maxlength="16" id="password2" name="password2" required=""
                                       value="">

                            </div>
                            <span class="confirm_hint" style="font-size: 30px;"></span>
                        </div>


                            <div class="form-inline-font" style="width: 90px;margin-left: 295px;margin-top: 10px; font-size: 12px">
                                滑动验证 :
                            </div>
                            <div class="form-inline-input" style="width: 409px; padding-left: 85px;">
                                <div class="code-box" id="code-box"style="width: 290px;">
                                    <input type="text" name="code" class="code-input" />
                                    <p id="pp"></p>
                                    <span style="background: deepskyblue">>>></span>
                                </div>
                            </div>

                        <div class="line liney clearfix">
                            <label class="linel">&nbsp;</label>
                            <div class="liner">
                                <div class="clearfix checkcon">
                                    <p class="fn-fl checktxt"><input type="checkbox" class="iyes fn-fl J_protocal" checked="" id="chee">
                                        <span class="fn-fl">我已阅读并同意</span><a class="itxt fn-fl" onclick="xieyi(this)"
                                                                             href="javascript:;" target="_blank">《学海教育服务协议》</a>
                                    </p>
                                    <p class="fn-fl errorbox v-txt" id="protocalBox"></p>
                                </div>
                                <a class="regbtn J_btn_agree" href="javascript:void(0);" onclick="submit()">同意协议并注册</a>
                                <p class="v-txt" id="err_check_code">
                                    <span class="fnred">请勾选</span>我已阅读并同意<a class="itxt" onclick="xieyi(this)" href="javascript:;">《学海教育服务协议》</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

    </div>
</div>

<script type="text/javascript" src="../js/login.js"></script>
<script>

    $("#username").blur(function(){
        if ((/^1[34578]\d{9}$/).test($("#username").val())){
            $('.mobile_hint').html("✔").css("color","green");
            Mobile_Boolean = true;
        }else {
            $('.mobile_hint').html("×").css("color","red");
            Mobile_Boolean = false;
        }
    });
    // password
    $("#password").blur(function(){
        if ((/^[a-z0-9_-]{6,16}$/).test($("#password").val())){
            $('.password_hint').html("✔").css("color","green");
            password_Boolean = true;
        }else {
            $('.password_hint').html("×").css("color","red");
            password_Boolean = false;
        }
    });


    // password_confirm
    $("#password2").blur(function(){
        if (($("#password").val())==($("#password2").val())){
            $('.confirm_hint').html("✔").css("color","green");
            varconfirm_Boolean = true;
        }else {
            $('.confirm_hint').html("×").css("color","red");
            varconfirm_Boolean = false;
        }
    });
    window.addEventListener('load',function(){

        //code是后台传入的验证字符串
        var code = "jsaidaisd656",
            codeFn = new moveCode(code);

        //获取当前的code值
        //console.log(codeFn.getCode());

        //改变code值
        //code = '46asd546as5';
        //codeFn.setCode(code);

        //重置为初始状态
        //codeFn.resetCode();
    });
</script>
<script src="../js/jqAlert.min.js"></script>
<script type="text/javascript">

    function submit() {
        if( password_Boolean && varconfirm_Boolean && Mobile_Boolean&&$("#chee").prop('checked') == true){
            var username=$("#username").val();
            var password=$("#password").val();
            $.ajax({
                type: "get",
                dataType: "json",
                url: "/reg",
                data: {"username":username,"password":password},

                success: function (data) {
                    var data=eval(data);
                    if (data.result=='success'){
                        jqAlert.Confirm('注册成功');
                        setInterval('window.location.href="index.html"',2000);
                    }else{
                        jqAlert.Confirm('注册失败请重试');
                    }
                }
            });

        }else {
            jqAlert.Confirm("请完善信息");
        }

    }
</script>
<!--footer-s-->
<div class="footer p">
    <link rel="stylesheet" href="../css/kefu.css">
    <div class="cndns-right">

        <div class="cndns-right-meau meau-sev">
            <a href="javascript:" class="cndns-right-btn">
                <span class="demo-icon"></span>
                <p>
                    在线<br>
                    客服
                </p>
            </a>
            <div class="cndns-right-box">
                <div class="box-border">
                    <div class="sev-t">
                        <span class="demo-icon"></span>
                        <p>在线客服<i>服务时间：9:00-24:00</i></p>
                        <div class="clear"></div>
                    </div>
                    <div class="sev-b">
                        <h4>学海教育在线沟通：</h4>
                        <ul id="zixunUl">
                            <li>
                                <a href="tencent://message/?uin=815750777&amp;Site=%E9%BD%90%E5%B3%B0%E6%95%99%E8%82%B2&amp;Menu=yes">学海教育客服</a>
                            </li>

                            <li>
                                <a href="tencent://message/?uin=815750777&amp;Site=%E9%BD%90%E5%B3%B0%E6%95%99%E8%82%B2&amp;Menu=yes">学海教育客服</a>
                            </li>
                            <li>
                                <a href="tencent://message/?uin=815750777&amp;Site=%E9%BD%90%E5%B3%B0%E6%95%99%E8%82%B2&amp;Menu=yes">学海教育客服</a>
                            </li>

                            <div class="clear"></div>
                        </ul>
                    </div>
                    <span class="arrow-right-kf"></span>
                </div>
            </div>
        </div>
        <div class="cndns-right-meau meau-contact">
            <a href="javascript:" class="cndns-right-btn">
                <span class="demo-icon"></span>
                <p>
                    客服<br>
                    热线
                </p>
            </a>
            <div class="cndns-right-box">
                <div class="box-border">
                    <div class="sev-t">
                        <span class="demo-icon"></span>
                        <p>0531-81768062<br><i>7*24小时客服服务热线</i></p>
                        <div class="clear"></div>
                    </div>
                    <span class="arrow-right-kf"></span>
                </div>
            </div>
        </div>
        <div class="cndns-right-meau meau-code">
            <a href="javascript:" class="cndns-right-btn">
                <span class="demo-icon"></span>
                <p>
                    关注<br>
                    微信
                </p>
            </a>
            <div class="cndns-right-box">
                <div class="box-border">
                    <div class="sev-t">
                        <img src="../pics/5db61c1f81444cf505e797939e3a7e4e.gif" width="150" height="150">
                        <i>关注官方微信</i>
                    </div>
                    <span class="arrow-right-kf"></span>
                </div>
            </div>
        </div>
        <div class="cndns-right-meau meau-top" id="top-back" style="display: none;">
            <a href="javascript:" class="cndns-right-btn" onclick="topBack()">
                <span class="demo-icon"></span>
                <i>顶部</i>
            </a>
        </div>

    </div>
</div>
    <script type="text/javascript">

        //置顶图标显示
        $('#top-back').hide()
        $(window).scroll(function () {
            if ($(this).scrollTop() > 350) {
                $("#top-back").fadeIn();
            }
            else {
                $("#top-back").fadeOut();
            }
        })

        //置顶事件
        function topBack() {
            $('body,html').animate({scrollTop: 0}, 300);
              }
    </script>
    <iframe src="footer.html" frameborder="0" height="319px" width="100%" scrolling="no"></iframe>
    <!--web footer end-->
    <script>
        function xieyi() {
            window.layer.open({
                type: 2 //Page层类型
                , area: ['810px', '600px']
                , title: '服务协议'
                , shade: 0.6 //遮罩透明度
                , maxmin: true //允许全屏最小化
                , anim: 1 //0-6的动画形式，-1不开启
                , content: "regxy.html"
            });
        }

        $(document).ready(function () {
            $('input').click(function () {
                $(this).siblings('p').hide();
            });

        });

        // 普通 图形验证码
        function verify(id) {
            $('#' + id).attr('src', '/index.php?m=Home&c=User&a=verify&type=user_reg&r=' + Math.random());
        }

        function check_submit() {

            $.ajax({
                type: "POST",
                url: "reg.html",
                dataType: "json",
                data: $('#reg_form2').serialize(),
                success: function (data) {
                    if (data.status == 1) {
                        layer.msg(data.msg, {icon: 1}, function () {
                            window.location.href = "index.html";
                        });
                    } else {
                        layer.alert(data.msg, {icon: 2}, function (index) {
                            $('.verifyImg').trigger('click');
                            layer.close(index);
                        });
                    }
                }
            });

        }

        // 电子邮件注册  和 手机号码注册 切换
        function reg_tab(id, id2) {
            $('#' + id).addClass('ema-tab');
            $('#' + id2).removeClass('ema-tab');
            $('#' + id + '_div').show();
            $('#' + id2 + '_div').hide();
        }

        // 发送手机短信
        function send_sms_reg_code() {
            var mobile = $('input[name="username"]').val();
            var verify_code = $('input[name="verify_code"]').val();
            if (!checkMobile(mobile)) {
                layer.alert('请输入正确的手机号码', {icon: 2});//alert('请输入正确的手机号码');
                return;
            }
            if (verify_code == '') {
                layer.alert('请输入图像验证码', {icon: 2});//alert('请输入正确的手机号码');
                return;
            }
            var url = "/index.php?m=Home&c=Api&a=send_validate_code&scene=1&type=mobile&mobile=" + mobile + "&verify_code=" + verify_code;
            $.ajax({
                url: url,
                dataType: "json",
                success: function (res) {
                    if (res.status == 1) {
                        $('#count_down').attr("disabled", "disabled");
                        intAs = 10; // 手机短信超时时间
                        jsInnerTimeout('count_down', intAs);
                        layer.alert(res.msg, {icon: 1});
                    } else {
                        layer.alert(res.msg, {icon: 2});
                        verify('reflsh_code2')
                    }
                }
            });
        }

        // 发送邮箱
        function send_smtp_reg_code() {
            var email = $('input[name="username"]').val();
            var verify_code = $('input[name="verify_code"]').val();
            if (!checkEmail(email)) {
                layer.alert('请输入正确的邮箱', {icon: 2});//alert('请输入正确的手机号码');
                return;
            }
            if (verify_code == '') {
                layer.alert('请输入图像验证码', {icon: 2});//alert('请输入正确的手机号码');
                return;
            }
            $.ajax({
                type: "POST",
                url: "send_validate_code.html",
                data: {type: 'email', send: email, scene: 1, verify_code: verify_code},// 你的formid
                dataType: "json",
                success: function (data) {
                    if (data.status == 1) {
                        $('#count_down').attr("disabled", "disabled");
                        intAs = 10; // 发送邮箱超时时间
                        jsInnerTimeout('count_down', intAs);
                        layer.alert(data.msg, {icon: 1});
                    } else {
                        layer.alert(data.msg, {icon: 2});
                        verify('reflsh_code2')
                    }
                }
            });
        }

        $('#count_down').removeAttr("disabled");

        //倒计时函数
        function jsInnerTimeout(id, intAs) {
            var codeObj = $("#" + id);
            //var intAs = parseInt(codeObj.attr("IntervalTime"));

            intAs--;
            if (intAs <= -1) {
                codeObj.removeAttr("disabled");
//            codeObj.attr("IntervalTime",60);
                codeObj.text("发送");
                return true;
            }

            codeObj.text(intAs + '秒');
//        codeObj.attr("IntervalTime",intAs);

            setTimeout("jsInnerTimeout('" + id + "'," + intAs + ")", 1000);
        };


        function checkMobile(tel) {
            var reg = /(^1[3|4|5|7|8][0-9]{9}$)/;
            if (reg.test(tel)) {
                return true;
            } else {
                return false;
            }
            ;
        }

        function checkEmail(str) {
            var reg = /^([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
            if (reg.test(str)) {
                return true;
            } else {
                return false;
            }
        }
    </script>



</body>
</html>